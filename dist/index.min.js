export var TranslatePreset;!function(t){t.SLOWER="50%,0%,-50%",t.SLOW="100%,0%,-100%",t.FAST="200%,0%,-200%",t.FASTER="300%,0%,-300%"}(TranslatePreset||(TranslatePreset={}));export var OpacityPreset;!function(t){t.FADE_IN="0,1,1",t.FADE_IN_OUT="0,1,0",t.HALF_FADE_IN="0.5,1,1",t.HALF_FADE_IN_OUT="0.5,1,0.5"}(OpacityPreset||(OpacityPreset={}));export var RangePreset;!function(t){t.COVER="cover 0% cover 100%",t.CONTAIN="contain 0% contain 100%"}(RangePreset||(RangePreset={}));const NO_TRANSLATE={enter:"0%",middle:"0%",exit:"0%"},NO_OPACITY={enter:"1",middle:"1",exit:"1"};class ParallaxX{constructor(){this.init()}async init(){if("undefined"==typeof window)throw new Error("Window is undefined. Use in client environment.");if(void 0===window.ScrollTimeline){console.warn("ScrollTimeline is not supported. Loading polyfill.");const t=document.createElement("script");t.src="https://flackr.github.io/scroll-timeline/dist/scroll-timeline.js",t.async=!1,t.onload=()=>{console.warn("ScrollTimeline Polyfill loaded")},document.head.appendChild(t)}this.setupParallax()}setupParallax(){document.querySelectorAll("[data-pxx-translate],[data-pxx-opacity]").forEach((t=>{this.setPxxxProperties(t,this.getPxxx(t))}))}getPxxx(t){let e={translate:NO_TRANSLATE,opacity:NO_OPACITY};const r=t=>{const e=t.match(/random\((-?\d+)\|(-?\d+)\)/);if(!e)throw new Error("Invalid input string");const r=Number(e[1]),n=Number(e[2]);return`${Math.floor(Math.random()*(n-r+1))+r}px`},n=(t,e)=>{const n=t.split(",");if(3===n?.length){let[t,e,a]=n;return t.includes("random")&&(t=r(t)),e.includes("random")&&(e=r(e)),a.includes("random")&&(a=r(a)),{enter:t,middle:e,exit:a}}return e?NO_TRANSLATE:NO_OPACITY},a=t.getAttribute("data-pxx-translate");a&&(e.translate=n(a,!0));const i=t.getAttribute("data-pxx-opacity");i&&(e.opacity=n(i,!1));const o=t.getAttribute("data-pxx-range");return o&&(e.range=o),e}setPxxxProperties(t,e){const{translate:r,opacity:n,range:a}=e;t.style.setProperty("--pxx-enter-translate",`translate3d(0, ${r.enter}, 0)`),t.style.setProperty("--pxx-center-translate",`translate3d(0, ${r.middle}, 0)`),t.style.setProperty("--pxx-exit-translate",`translate3d(0, ${r.exit}, 0)`),t.style.setProperty("--pxx-enter-opacity",n.enter),t.style.setProperty("--pxx-center-opacity",n.middle),t.style.setProperty("--pxx-exit-opacity",n.exit),a&&t.style.setProperty("--pxx-animation-range",a)}}export{ParallaxX};